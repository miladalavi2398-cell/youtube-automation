name: Create YouTube Video
on:
  workflow_dispatch:  # Ø§Ø¬Ø§Ø²Ù‡ Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÛŒ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
  schedule:
    - cron: '0 8 * * *'  # Ù‡Ø± Ø±ÙˆØ² Ø³Ø§Ø¹Øª 8 ØµØ¨Ø­ Ø¨Ù‡ ÙˆÙ‚Øª Ø¬Ù‡Ø§Ù†ÛŒ

jobs:
  build-video:
    runs-on: ubuntu-latest  # Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± Ø§ÙˆØ¨ÙˆÙ†ØªÙˆ Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯
    
    steps:
    # Ù…Ø±Ø­Ù„Ù‡ Û±: Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ
    - name: Checkout repository
      uses: actions/checkout@v3
      
    # Ù…Ø±Ø­Ù„Ù‡ Û²: Ù†ØµØ¨ FFmpeg
    - name: Install FFmpeg
      run: |
        sudo apt-get update
        sudo apt-get install -y ffmpeg
        ffmpeg -version  # Ø¨Ø±Ø±Ø³ÛŒ Ù†ØµØ¨
        
    # Ù…Ø±Ø­Ù„Ù‡ Û³: Ø¯Ø§Ù†Ù„ÙˆØ¯ ÛŒÚ© ØªØµÙˆÛŒØ± ØªØ³Øª
    - name: Download sample image
      run: |
        curl -L -o background.jpg "https://images.unsplash.com/photo-1677442136019-21780ecad995?auto=format&fit=crop&w=1280&h=720"
        echo "âœ… Image downloaded"
        
    # Ù…Ø±Ø­Ù„Ù‡ Û´: ØªÙˆÙ„ÛŒØ¯ ØµÙˆØª ØªØ³Øª
    - name: Create test audio
      run: |
        # Ø³Ø§Ø®Øª ÛŒÚ© ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ ØªØ³Øª
        echo "Creating test audio..."
        text="Welcome to our daily video. Today we discuss technology and innovation."
        curl -G "https://translate.google.com/translate_tts" \
          --data-urlencode "ie=UTF-8" \
          --data-urlencode "client=tw-ob" \
          --data-urlencode "tl=en" \
          --data-urlencode "q=$text" \
          -o audio.mp3
          
    # Ù…Ø±Ø­Ù„Ù‡ Ûµ: Ø³Ø§Ø®Øª ÙˆÛŒØ¯ÛŒÙˆ
    - name: Create video with FFmpeg
      run: |
        echo "ğŸ¬ Creating video..."
        ffmpeg -loop 1 -i background.jpg -i audio.mp3 \
               -c:v libx264 -tune stillimage \
               -c:a aac -b:a 192k \
               -pix_fmt yuv420p \
               -vf "scale=1280:720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2" \
               -shortest \
               -y output_video.mp4
               
        # Ø¨Ø±Ø±Ø³ÛŒ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù† ÙˆÛŒØ¯ÛŒÙˆ
        ls -lh output_video.mp4
        echo "âœ… Video created successfully"
        
    # Ù…Ø±Ø­Ù„Ù‡ Û¶: Ø°Ø®ÛŒØ±Ù‡ ÙˆÛŒØ¯ÛŒÙˆ
    - name: Upload video artifact
      uses: actions/upload-artifact@v3
      with:
        name: youtube-video
        path: output_video.mp4
        retention-days: 7  # Û· Ø±ÙˆØ² Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯
        
    # Ù…Ø±Ø­Ù„Ù‡ Û·: Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
    - name: Show completion message
      run: |
        echo "========================================"
        echo "ğŸ‰ VIDEO CREATION COMPLETE!"
        echo "ğŸ“… Date: $(date)"
        echo "ğŸ“¦ Video saved as artifact: 'youtube-video'"
        echo "ğŸ“¥ Download from Actions tab â†’ Artifacts"
        echo "========================================"
